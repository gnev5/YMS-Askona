## Руководство пользователя YMS (Yard Management System)

Версия: 1.0

### 1. Роли и доступ
- **Администратор (admin)**: управление пользователями, доками, типами ТС, расписаниями, генерацией интервалов.
- **Пользователь (carrier)**: просмотр календаря слотов, бронирование, просмотр/отмена своих записей.

Учётная запись по умолчанию (после `seed`):
- Email: `admin@yms.local`
- Пароль: `Admin1234!`

### 2. Вход в систему
1) Откройте фронтенд: `http://localhost:5173`
2) Введите Email и Пароль
3) Нажмите «Войти». В правом верхнем углу появится текущий пользователь и его роль.

Если вход не выполняется: проверьте доступность бэкенда `http://localhost:8000/docs` и корректность логина/пароля.

### 3. Календарь слотов
Главный экран после входа — календарь Day/Week.

- Интервал: 30 минут.
- Отображение каждого интервала:
  - Заголовок: `занято/всего` (например, `2/5`)
  - Цвета:
    - Зеленый — свободно (free)
    - Желтый — частично занято (partial)
    - Красный — полностью занято (full)
  - Цвет текста: темно-синий

Переключение представлений:
- Week — показывает всю неделю (Пн–Вс). При первом открытии загружается вся неделя.
- Day — показывает выбранный день из строки заголовка.

Клик по свободному интервалу — открывает окно бронирования.

### 4. Бронирование слота (пользователь)
1) Нажмите на свободный интервал.
2) В модальном окне заполните форму:
   - Тип ТС (определяет длительность и количество последовательных интервалов)
   - Гос. номер ТС
   - ФИО водителя
   - Телефон
3) Подтвердите «Записаться».

Правила:
- Система подберет один док, где есть достаточно подряд идущих свободных интервалов под длительность типа ТС.
- Если подходящего окна нет — получите сообщение об ошибке.

### 5. Мои записи (пользователь)
Меню «Мои записи»:
- Список будущих бронирований с датой/временным окном, доком, типом ТС и контактами.
- Кнопка «Отменить» — отменяет все интервалы одного бронирования по `group_id`.

### 6. Управление (Администратор)

6.1. Пользователи
- Меню «Пользователи» (видно только админу).
- Действия:
  - Создать пользователя: Email, Пароль, ФИО, Роль (`Администратор` или `Пользователь`). Роль хранится как `admin` или `carrier`.
  - Редактировать ФИО/роль/активность, при необходимости обновить пароль.
  - Удалить пользователя.

6.2. Доки
- Меню «Доки»: список доков, создание/редактирование/удаление.
- Поля: имя, статус, габариты/нагрузка (опционально).

6.3. Типы ТС
- Меню «Типы ТС»: CRUD типов ТС.
- Важное поле — `duration_minutes` (30, 60, 90, 120…), влияет на длину окна бронирования.

6.4. Расписание
- Меню «Расписание»:
  - Выбор дока в селекте (сверху слева).
  - Таблица Пн–Вс для выбранного дока с полями: Рабочий день, Начало/Окончание, Перерыв С/До, Емкость.
  - Кнопки:
    - «Сохранить» — сохранить строку дня для выбранного дока
    - «Сохранить неделю» — сохранить все строки текущего дока
    - «Сгенерировать интервалы» — пересоздать слоты на основе всех расписаний (всех доков)

Примечания по полям:
- Рабочий день — включает/выключает работу дока в конкретный день.
- Начало/Окончание — границы рабочего времени дока (например, 09:00–18:00).
- Перерыв С/До — необязательно; интервалы во время перерыва не создаются.
- Емкость — сколько машин одновременно может обслуживать док в одном 30-минутном интервале (обычно 1).

6.5. Генерация интервалов
- Кнопка «Сгенерировать интервалы» удаляет прежние слоты и пересоздаёт по всем расписаниям.
- В календаре «всего» для интервала считается количеством доков, у которых есть интервал в это время.

### 7. Диагностика и частые проблемы
- «Не могу войти»:
  - Проверьте `http://localhost:8000/docs`.
  - Убедитесь в корректности логина/пароля.
  - Очистите localStorage или разлогиньтесь и войдите снова.
- «Слоты не видны»:
  - Проверьте, что для выбранного периода существуют расписания по докам.
  - Нажмите «Сгенерировать интервалы» после обновления расписаний.
- «Invalid role value» при создании пользователя:
  - Роль должна быть `admin` (Администратор) или `carrier` (Пользователь).
- «Ошибка бронирования»:
  - Убедитесь, что длительность типа ТС кратна 30 мин или система сможет подобрать необходимое количество последовательных интервалов в одном доке.

### 8. Справочно: соответствия терминов
- Роль «Пользователь» в базе хранится как `carrier`.
- Роль «Администратор» — `admin`.
- Интервалы — 30 минут. Цвет/доступность определяется суммарной занятостью по всем докам в интервале.

### 9. Контакты/поддержка
Для технической поддержки подготовьте логи бэкенда (последние 50 строк), скриншоты ошибок и точные шаги воспроизведения.


